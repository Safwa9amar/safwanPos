model Customer {
  id      String  @id @default(cuid())
  name    String
  phone   String?
  email   String? @unique
  address String?
  balance Float   @default(0)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  sales   Sale[]
  
  payments Payment[]

  @@index([userId])
}

model Payment {
  id          String   @id @default(cuid())
  customerId  String
  customer    Customer @relation(fields: [customerId], references: [id], onDelete: Cascade)
  amount      Float
  paymentDate DateTime @default(now())
  notes       String?

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Restrict) // No cascade delete, keep payment history

  @@index([customerId])
  @@index([userId])
}
